{{#if isAdminMode}}
<!-- Admin Mode Indicator -->
<div class="admin-mode-indicator desktop">
    <div class="admin-toolbar">
        <span class="admin-status">üõ†Ô∏è Modo de Edici√≥n Admin</span>
        <div class="admin-actions">
            <button class="admin-btn" onclick="exitAdminMode()">‚ùå Salir del Modo Admin</button>
            <a href="/admin-panel" class="admin-btn">‚öôÔ∏è Panel Admin</a>
        </div>
    </div>
</div>
{{/if}}

{{#if message}}
<!-- Message Notification -->
<div class="message-notification message-{{message.type}}">
    <div class="message-content">
        <span class="message-icon">
            {{#if (eq message.type "warning")}}‚ö†Ô∏è{{/if}}
            {{#if (eq message.type "error")}}‚ùå{{/if}}
            {{#if (eq message.type "success")}}‚úÖ{{/if}}
            {{#if (eq message.type "info")}}‚ÑπÔ∏è{{/if}}
        </span>
        <span class="message-text">{{message.text}}</span>
        <button class="message-close" onclick="this.parentElement.parentElement.style.display='none'">√ó</button>
    </div>
</div>
{{/if}}

{{#if isWysiwygMode}}
<!-- WYSIWYG Admin Toolbar -->
<div id="wysiwygToolbar" class="wysiwyg-toolbar">
    <div class="toolbar-content">
        <div class="toolbar-left">
            <span class="toolbar-title">üé® WYSIWYG Admin Mode</span>
            <span class="toolbar-subtitle">Click on any text to edit</span>
        </div>
        <div class="toolbar-right">
            <button class="toolbar-btn" onclick="toggleEditMode()" id="editModeBtn">
                <i class="icon">‚úèÔ∏è</i>
                <span>Edit Mode: ON</span>
            </button>
            <button class="toolbar-btn" onclick="saveAllChanges()">
                <i class="icon">üíæ</i>
                <span>Save All</span>
            </button>
            <a href="/admin-panel" class="toolbar-btn">
                <i class="icon">‚öôÔ∏è</i>
                <span>Classic Admin</span>
            </a>
            <a href="/main-page" class="toolbar-btn toolbar-btn-exit">
                <i class="icon">üëÅÔ∏è</i>
                <span>View Mode</span>
            </a>
        </div>
    </div>
</div>
{{/if}}

{{> desktop/top-header}}

<div class="desktop-main-container {{#if isWysiwygMode}}wysiwyg-mode{{/if}}">
    <!-- Sidebar -->
    {{> desktop/sidebar}}

    <!-- Main Content Area -->
    <main class="desktop-main-content">
        <!-- Top Navigation Links -->
        <div class="top-nav-links">
            <a href="#" class="nav-link">Tax information</a>
            <a href="#" class="nav-link">Emergency help</a>
            <a href="#" class="nav-link">Inheritance processing</a>
            <a href="#" class="nav-link">Accessibility</a>
        </div>

        <!-- Welcome Section -->
        <div class="welcome-section">
            <div class="welcome-header">
                <div class="welcome-content">
                    <h1 class="{{#if isWysiwygMode}}editable{{/if}}" 
                        {{#if isWysiwygMode}}data-field="welcomeMessage" data-page="mainPage" data-type="text"{{/if}}>
                        {{desktopData.mainPage.welcomeMessage}}
                    </h1>
                    <p class="last-connection {{#if isWysiwygMode}}editable{{/if}}" 
                       {{#if isWysiwygMode}}data-field="lastConnection" data-page="mainPage" data-type="text"{{/if}}>
                       {{desktopData.mainPage.lastConnection}}
                    </p>
                </div>
                <div class="user-contact">
                    <div class="contact-info">
                        <div class="contact-icon">
                            <img class="clip-box__image" src="https://web.bbva.es/packages/assets/img/coronita/entity/clip/light/170.svg?v=3646262f" alt="">
                        </div>
                        <div class="contact-details">
                            <span class="contact-label {{#if isWysiwygMode}}editable{{/if}}" 
                                  {{#if isWysiwygMode}}data-field="contactTeam" data-page="mainPage" data-type="text"{{/if}}>
                                  {{desktopData.mainPage.contactTeam}}
                            </span>
                            <span class="contact-phone {{#if isWysiwygMode}}editable{{/if}}" 
                                  {{#if isWysiwygMode}}data-field="contactPhone" data-page="mainPage" data-type="text"{{/if}}>
                                  {{desktopData.mainPage.contactPhone}}
                            </span>
                        </div>
                    </div>
                    <a href="#" class="appointment-btn">
                        <span class="{{#if isWysiwygMode}}editable{{/if}}" 
                              {{#if isWysiwygMode}}data-field="appointmentText" data-page="mainPage" data-type="text"{{/if}}>
                              {{desktopData.mainPage.appointmentText}}
                        </span>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 18l6-6-6-6"></path>
                        </svg>
                    </a>
                </div>
            </div>
            
            <div class="balance-summary">
                <div class="balance-main">
                    <p class="balance-label {{#if isWysiwygMode}}editable{{/if}}" 
                       {{#if isWysiwygMode}}data-field="balanceLabel" data-page="mainPage" data-type="text"{{/if}}>
                       {{desktopData.mainPage.balanceLabel}}
                    </p>
                    <div class="main-balance-display">
                        <span class="balance-amount-large {{#if isWysiwygMode}}editable{{/if}}" 
                              {{#if isWysiwygMode}}data-field="totalBalance" data-page="mainPage" data-type="text"{{/if}}>
                              {{desktopData.mainPage.totalBalance}}
                        </span>
                    </div>
                </div>
                
                <div class="balance-details">
              
                    
                    <div class="balance-controls">
                        <label class="toggle-switch">
                            <input type="checkbox" id="showAmounts" checked>
                            <span class="slider"></span>
                        </label>
                        <span class="toggle-label">{{desktopData.mainPage.showAmountsLabel}}</span>
                        <a href="#" class="customize-link">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                            </svg>
                            {{desktopData.mainPage.customizeText}}
                        </a>
                    </div>
                </div>
                
                <div class="products-info">
                    <div class="products-card">
                        <h3>{{desktopData.mainPage.productsTitle}}</h3>
                        <a href="#" class="see-all-btn">See all</a>
                    </div>
                </div>
            </div>
        </div>



        <!-- Fast Transactions Section -->
        <div class="fast-transactions-section">
            <div class="section-header">
                <h2 class="{{#if isWysiwygMode}}editable{{/if}}" 
                    {{#if isWysiwygMode}}data-field="fastTransactionsTitle" data-page="mainPage" data-type="text"{{/if}}>
                    {{desktopData.mainPage.fastTransactionsTitle}}
                </h2>
                <a href="#" class="setup-link">
                    Set up
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                </a>
            </div>
            <div class="fast-actions-grid">
                <div class="fast-action-item">
                    <div class="action-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                            <line x1="1" y1="10" x2="23" y2="10"></line>
                        </svg>
                    </div>
                    <span class="action-label">Check CVV</span>
                </div>
                <div class="fast-action-item">
                    <div class="action-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="1" x2="12" y2="23"></line>
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                        </svg>
                    </div>
                    <span class="action-label">Manage a transfer</span>
                </div>
                <div class="fast-action-item">
                    <div class="action-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 12l2 2 4-4"></path>
                            <circle cx="12" cy="12" r="10"></circle>
                        </svg>
                    </div>
                    <span class="action-label">View PIN</span>
                </div>
                <div class="fast-action-item">
                    <div class="action-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>
                    </div>
                    <span class="action-label">Send / Receive money (Bizum)</span>
                </div>
            </div>
            <a href="#" class="see-all-transactions">See all the transactions</a>
        </div>

        <!-- Perform an Operation Section -->
        <div class="operations-section">
            <div class="section-header">
                <h2 class="{{#if isWysiwygMode}}editable{{/if}}" 
                    {{#if isWysiwygMode}}data-field="operationsTitle" data-page="mainPage" data-type="text"{{/if}}>
                    {{desktopData.mainPage.operationsTitle}}
                </h2>
                <p class="section-subtitle {{#if isWysiwygMode}}editable{{/if}}" 
                   {{#if isWysiwygMode}}data-field="operationsSubtitle" data-page="mainPage" data-type="text"{{/if}}>
                   {{desktopData.mainPage.operationsSubtitle}}
                </p>
            </div>
            <div class="operations-grid">
                {{#each desktopData.operations}}
                <div class="operation-card">
                    <div class="operation-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M7 17l9.2-9.2M17 17H7V7"></path>
                        </svg>
                    </div>
                    <div class="operation-info">
                        <h3 class="operation-title {{#if ../isWysiwygMode}}editable{{/if}}" 
                            {{#if ../isWysiwygMode}}data-field="title" data-page="operations" data-type="text" data-id="{{this.id}}"{{/if}}>
                            {{this.title}}
                        </h3>
                        <p class="operation-description {{#if ../isWysiwygMode}}editable{{/if}}" 
                           {{#if ../isWysiwygMode}}data-field="description" data-page="operations" data-type="textarea" data-id="{{this.id}}"{{/if}}>
                           {{this.description}}
                        </p>
                        <a href="#" class="operation-link">
                            <span class="{{#if ../isWysiwygMode}}editable{{/if}}" 
                                  {{#if ../isWysiwygMode}}data-field="linkText" data-page="operations" data-type="text" data-id="{{this.id}}"{{/if}}>
                                  {{this.linkText}}
                            </span>
                        </a>
                    </div>
                </div>
                {{/each}}
            </div>
            
            <div class="see-more-section">
                <button class="see-more-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M6 9l6 6 6-6"></path>
                    </svg>
                    See more
                </button>
            </div>
        </div>
    </main>
</div>

{{#if isWysiwygMode}}
<!-- Changes Indicator will be added by JavaScript -->
{{/if}}

<!-- Floating Help Button -->
<div class="floating-help">
    <button class="help-btn" title="Help">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
        <span class="help-text">Help</span>
    </button>
</div>

<script src="/js/desktop/main-page.js"></script>
{{#if isAdminMode}}
<script src="/js/inline-editor.js"></script>
{{/if}}

{{#if isWysiwygMode}}
<!-- WYSIWYG Admin Toolbar -->
<div id="wysiwygToolbar" class="wysiwyg-toolbar">
    <div class="toolbar-content">
        <div class="toolbar-left">
            <span class="toolbar-title">üé® WYSIWYG Admin Mode</span>
            <span class="toolbar-subtitle">Click on any text to edit</span>
        </div>
        <div class="toolbar-center">
            <div class="page-navigation">
                <a href="/admin-wysiwyg" class="nav-btn">
                    <i class="icon">üè†</i>
                    <span>Main</span>
                </a>
                <a href="/admin-wysiwyg/accounts" class="nav-btn">
                    <i class="icon">üè¶</i>
                    <span>Accounts</span>
                </a>
                <a href="/admin-wysiwyg/mortgages" class="nav-btn active">
                    <i class="icon">üè†</i>
                    <span>Mortgages</span>
                </a>
                <a href="/admin-wysiwyg/transfers" class="nav-btn">
                    <i class="icon">üí∏</i>
                    <span>Transfers</span>
                </a>
                <a href="/admin-wysiwyg/insurance" class="nav-btn">
                    <i class="icon">üõ°Ô∏è</i>
                    <span>Insurance</span>
                </a>
            </div>
        </div>
        <div class="toolbar-right">
            <button class="toolbar-btn" onclick="toggleEditMode()" id="editModeBtn">
                <i class="icon">‚úèÔ∏è</i>
                <span>Edit Mode: ON</span>
            </button>
            <button class="toolbar-btn" onclick="saveAllChanges()">
                <i class="icon">üíæ</i>
                <span>Save All</span>
            </button>
            <a href="/mortgages" class="toolbar-btn toolbar-btn-exit">
                <i class="icon">üëÅÔ∏è</i>
                <span>View Mode</span>
            </a>
        </div>
    </div>
</div>
{{/if}}

{{> desktop/top-header}}

<div class="desktop-main-container {{#if isWysiwygMode}}wysiwyg-mode{{/if}}">
    {{> desktop/sidebar}}

    <main class="desktop-main-content">
        <!-- Page Header -->
        <div class="page-header">
            <h1 class="{{#if isWysiwygMode}}editable{{/if}}" 
                {{#if isWysiwygMode}}data-field="pageTitle" data-page="mortgages" data-type="text"{{/if}}>
                {{desktopData.mortgages.pageTitle}}
            </h1>
        </div>

        <!-- Available Products Section -->
        <div class="section-card">
            <div class="section-header">
                <h2 class="{{#if isWysiwygMode}}editable{{/if}}" 
                    {{#if isWysiwygMode}}data-field="availableProductsTitle" data-page="mortgages" data-type="text"{{/if}}>
                    {{desktopData.mortgages.availableProductsTitle}}
                </h2>
            </div>
                        <div class="products-grid">
                {{#each desktopData.mortgageProducts}}
                <div class="product-item">
                    <h3 class="{{#if ../isWysiwygMode}}editable{{/if}}" 
                        {{#if ../isWysiwygMode}}data-field="title" data-page="mortgageProducts" data-type="text" data-id="{{this.id}}"{{/if}}>
                        {{this.title}}
                    </h3>
                    <p class="{{#if ../isWysiwygMode}}editable{{/if}}" 
                       {{#if ../isWysiwygMode}}data-field="description" data-page="mortgageProducts" data-type="textarea" data-id="{{this.id}}"{{/if}}>
                       {{this.description}}
                    </p>
                    <ul>
                        {{#each this.features}}
                        <li class="{{#if ../../isWysiwygMode}}editable{{/if}}" 
                            {{#if ../../isWysiwygMode}}data-field="features" data-page="mortgageProducts" data-type="text" data-id="{{../id}}" data-feature-index="{{@index}}"{{/if}}>
                            {{this}}
                        </li>
                        {{/each}}
                    </ul>
                    <button class="btn btn-secondary">Learn More</button>
                </div>
                {{/each}}
            </div>
        </div>

        <!-- Loan Calculator Section -->
        <div class="section-card">
            <div class="section-header">
                <h2 class="{{#if isWysiwygMode}}editable{{/if}}" 
                    {{#if isWysiwygMode}}data-field="calculatorTitle" data-page="mortgages" data-type="text"{{/if}}>
                    {{desktopData.mortgages.calculatorTitle}}
                </h2>
            </div>
            <div class="calculator-area">
                <div class="calculator-form">
                    <div class="form-group">
                        <label for="loanAmount">Loan Amount (‚Ç¨)</label>
                        <input type="number" id="loanAmount" placeholder="Enter amount" min="1000" max="500000">
                    </div>
                    <div class="form-group">
                        <label for="loanTerm">Term (years)</label>
                        <select id="loanTerm">
                            <option value="5">5 years</option>
                            <option value="10">10 years</option>
                            <option value="15">15 years</option>
                            <option value="20">20 years</option>
                            <option value="25">25 years</option>
                            <option value="30">30 years</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="interestRate">Interest Rate (%)</label>
                        <input type="number" id="interestRate" placeholder="3.5" step="0.1" min="1" max="15">
                    </div>
                    <button class="btn btn-primary" onclick="calculateLoan()">Calculate</button>
                </div>
                <div class="calculator-result">
                    <div class="result-item">
                        <span class="result-label">Monthly Payment:</span>
                        <span class="result-value" id="monthlyPayment">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Interest:</span>
                        <span class="result-value" id="totalInterest">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Amount:</span>
                        <span class="result-value" id="totalAmount">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Section -->
        <div class="section-card">
            <div class="section-header">
                <h2 class="{{#if isWysiwygMode}}editable{{/if}}" 
                    {{#if isWysiwygMode}}data-field="contactTitle" data-page="mortgages" data-type="text"{{/if}}>
                    {{desktopData.mortgages.contactTitle}}
                </h2>
            </div>
            <div class="contact-info">
                <p class="{{#if isWysiwygMode}}editable{{/if}}" 
                   {{#if isWysiwygMode}}data-field="contactDescription" data-page="mortgages" data-type="textarea"{{/if}}>
                   {{desktopData.mortgages.contactDescription}}
                </p>
                <div class="contact-options">
                    <button class="btn btn-primary">Schedule an Appointment</button>
                    <button class="btn btn-secondary">Call Us: 
                        <span class="{{#if isWysiwygMode}}editable{{/if}}" 
                              {{#if isWysiwygMode}}data-field="contactPhone" data-page="mortgages" data-type="text"{{/if}}>
                              {{desktopData.mortgages.contactPhone}}
                        </span>
                    </button>
                </div>
            </div>
        </div>
    </main>
</div>

<script src="/js/desktop/mortgages.js"></script>

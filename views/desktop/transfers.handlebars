{{> desktop/top-header}}

<div class="desktop-main-container">
    {{> desktop/sidebar}}

    <main class="desktop-main-content">
        <!-- Page Header -->
        <div class="page-header">
            <div class="header-content">
                <h1>Transferencias</h1>
                <p class="page-subtitle">Gestiona tus transferencias y pagos</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-primary" onclick="openNewTransferModal()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Nueva transferencia
                </button>
                <button class="btn btn-secondary" onclick="openScheduledTransferModal()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12,6 12,12 16,14"></polyline>
                    </svg>
                    Programar transferencia
                </button>
            </div>
        </div>

        <!-- Transfer Options -->
        <div class="transfer-options">
            <div class="option-card" onclick="openTransferModal('internal')">
                <div class="option-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <path d="M4 10l8-8 8 8"></path>
                    </svg>
                </div>
                <div class="option-content">
                    <h3>Entre mis cuentas</h3>
                    <p>Transfiere dinero entre tus cuentas BBVA</p>
                </div>
            </div>

            <div class="option-card" onclick="openTransferModal('external')">
                <div class="option-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                        <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                    </svg>
                </div>
                <div class="option-content">
                    <h3>A otra cuenta</h3>
                    <p>Envía dinero a cuentas de otros bancos</p>
                </div>
            </div>

            <div class="option-card" onclick="openTransferModal('international')">
                <div class="option-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="2" y1="12" x2="22" y2="12"></line>
                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                    </svg>
                </div>
                <div class="option-content">
                    <h3>Internacional</h3>
                    <p>Transferencias al extranjero</p>
                </div>
            </div>

            <div class="option-card" onclick="openTransferModal('bizum')">
                <div class="option-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                </div>
                <div class="option-content">
                    <h3>Bizum</h3>
                    <p>Envía dinero con el móvil</p>
                </div>
            </div>
        </div>

        <!-- Recent Transfers -->
        <div class="transfers-section">
            <div class="section-header">
                <h2>Transferencias recientes</h2>
                <div class="section-filters">
                    <select class="filter-select">
                        <option value="all">Todas</option>
                        <option value="sent">Enviadas</option>
                        <option value="received">Recibidas</option>
                        <option value="pending">Pendientes</option>
                    </select>
                    <button class="filter-btn" onclick="openDateFilter()">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        Filtrar por fecha
                    </button>
                </div>
            </div>

            <div class="transfers-list">
                {{#each transfers}}
                <div class="transfer-item {{this.transferType}}">
                    <div class="transfer-icon">
                        {{#if (eq this.transferType 'received')}}
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="7" y1="17" x2="17" y2="7"></line>
                            <polyline points="7,7 17,7 17,17"></polyline>
                        </svg>
                        {{else}}
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="17" y1="7" x2="7" y2="17"></line>
                            <polyline points="17,17 7,17 7,7"></polyline>
                        </svg>
                        {{/if}}
                    </div>
                    <div class="transfer-details">
                        <div class="transfer-info">
                            <h3 class="transfer-description">{{this.description}}</h3>
                            <p class="transfer-recipient">
                                {{#if (eq this.transferType 'received')}}
                                    De: {{this.senderName}}
                                {{else}}
                                    Para: {{this.recipientName}}
                                {{/if}}
                            </p>
                            <span class="transfer-account">{{this.accountNumber}}</span>
                        </div>
                        <div class="transfer-meta">
                            <span class="transfer-date">{{formatDate this.date}}</span>
                            <span class="transfer-status {{this.status}}">{{this.status}}</span>
                        </div>
                    </div>
                    <div class="transfer-amount {{this.transferType}}">
                        <span class="amount-value">
                            {{#if (eq this.transferType 'received')}}+{{/if}}{{formatAmount this.amount}}
                        </span>
                        <span class="amount-currency">{{this.currency}}</span>
                    </div>
                    <div class="transfer-actions">
                        <button class="action-btn" title="Ver detalles" onclick="viewTransferDetails('{{this.id}}')">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                        </button>
                        <button class="action-btn" title="Repetir transferencia" onclick="repeatTransfer('{{this.id}}')">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="1 4 1 10 7 10"></polyline>
                                <polyline points="23 20 23 14 17 14"></polyline>
                                <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
    </main>
</div>

<script src="/js/desktop/transfers.js"></script>

<!-- Top Header -->
<header class="top-header">
    <div class="left">
        <img src="/Logo-BBVA.webp" alt="BBVA Logo" class="header-logo">
         <div class="header-icon visible-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
            <span>Visible</span>
        </div>
    </div>
    <div class="center">
        <span>Hola, {{user.name}}</span>
    </div>
    <div class="right">
        <div class="header-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
            <span>Blue</span>
        </div>
         <div class="header-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            <span>Menú</span>
        </div>
    </div>
</header>

<main>
    <!-- Tabs -->
    <div class="tabs">
        <div class="tab active">Destacado</div>
        <div class="tab inactive">Tus productos</div>
    </div>
    
    <!-- Principales productos Section -->
    <section class="section">
        <div class="section-header">
            <h2>Principales productos</h2>
            <div class="edit-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
            </div>
        </div>
        <div class="products-carousel">
            <div class="carousel-container" id="carouselContainer">
                {{#each allAccounts}}
                <div class="product-card" data-type="account">
                    <div class="card-header">
                        <h3>{{this.type}} {{this.accountNumber}}</h3>
                        <span>{{this.accountNumber}}</span>
                    </div>
                    <div class="card-balance">{{formatAmount this.balance}} {{this.currency}}</div>
                    <div class="card-balance-label">Saldo disponible</div>
                    
                    <div class="movements-header">
                        <h4>Últimos movimientos</h4>
                        <a href="/admin-panel" target="_blank">Ver admin</a>
                    </div>

                    {{#each this.recentTransactions}}
                    <div class="movement-item">
                        <div class="movement-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4 10v1a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-1H4zM10 5a3 3 0 0 0-3 3v1h6V8a3 3 0 0 0-3-3zM3 8a4 4 0 0 1 4-4h6a4 4 0 0 1 4 4v1a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V8zM3 18a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z"/></svg>
                        </div>
                        <div class="movement-details">
                            <p>{{this.description}}</p>
                        </div>
                        <span class="movement-amount {{#if (gt this.amount 0)}}positive{{/if}}">{{formatAmount this.amount}} {{this.currency}}</span>
                    </div>
                    {{/each}}

                    <a href="/admin-panel" class="card-footer-link">Ver panel de administración</a>
                </div>
                {{/each}}

                {{#each allCards}}
                <div class="product-card" data-type="card">
                    <div class="card-header">
                        <h3>Tarjeta {{this.type}} {{this.cardNumber}}</h3>
                        <span>{{this.cardNumber}}</span>
                    </div>
                    <div class="card-balance">{{formatAmount this.limit}} {{this.currency}}</div>
                    <div class="card-balance-label">Límite disponible</div>
                    
                    <div class="movements-header">
                        <h4>Estado</h4>
                        <span class="card-status {{this.status}}">{{this.status}}</span>
                    </div>

                    <div class="card-info">
                        <p>Tipo: {{this.type}}</p>
                        <p>Estado: {{this.status}}</p>
                    </div>

                    <a href="/admin-panel" class="card-footer-link">Ver panel de administración</a>
                </div>
                {{/each}}
            </div>
             <div class="carousel-nav">
                <button id="prevBtn" onclick="changeSlide(-1)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></button>
                <span id="slideCounter">1 de {{totalProducts}}</span>
                <button id="nextBtn" onclick="changeSlide(1)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></button>
            </div>
        </div>
    </section>


{{> bottom-nav activePage="main-page"}}

<script src="/js/main-page.js"></script>
